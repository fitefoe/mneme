<div ng-controller="NewCtrl">
  <h2>New mneme</h2>
  <form role="form" ng-submit="validate() && save()">
    <!-- name -->
    <div class="row">
      <div class="form-group col-md-6">
        <label for="name">Name</label>
        <input ng-model="name" type="text" class="form-control" id="name"
          placeholder="Example: buy rice">
      </div>
    </div>

    <!-- labels -->
    <div class="form-group">
      <label for="tags">
        <span class="glyphicon glyphicon-tags"></span>
        Tags
      </label>
      <a href ng-repeat="tag in tags" ng-click="tags_remove(tag)"
          class="label label-primary mneme-tag mneme-hover-base">
        <span class="glyphicon glyphicon-tag mneme-hover-hide"></span>
        <span class="glyphicon glyphicon-minus-sign mneme-hover-show"></span>
        {{tag}}
      </a>
      <small ng-show="!tags.length">
        No tags have been specified yet.
      </small>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="input-group">
          <input
              ng-model="tag_new"
              typeahead="tag.name for tag in tags_used | filter:$viewValue | limitTo:8"
              ng-keydown="$event.keyCode == 13 && ($event.preventDefault() || tag_new_validate() && tags_add())"
              placeholder="Example: shopping list"
              type="text" class="form-control">
          <!--input ng-model="tag_new" 
              ng-keydown="$event.keyCode == 13 && ($event.preventDefault() || tag_new_validate() && tags_add())"
              type="text" class="form-control"
              placeholder="Example: shopping list"-->
          <span class="input-group-btn">
            <button
                ng-click="tags_add()"
                ng-class="{disabled: !tag_new_validate()}"
                class="btn btn-primary" type="button">
              <span class="glyphicon glyphicon-tag"></span>
              Add tag
            </button>
          </span>
        </div>
      </div>
    </div>
    <div>
      <a href=""
          ng-repeat="tag in tags_used | orderBy: '-count'"
          ng-click="tags.push(tag.name)"
          class="label label-info mneme-tag mneme-hover-base">
        <span class="glyphicon glyphicon-tag mneme-hover-hide"></span>
        <span class="glyphicon glyphicon-plus-sign mneme-hover-show"></span>
        {{tag.name}}
        <span class="mneme-badge">{{tag.count}}</span>
      </a>
    </div>

    <hr>

    <button ng-class="{disabled: !validate()}"
        type="submit" class="btn btn-primary">
      Save
    </button>
    <a href="#/overview" type="button" class="btn btn-default">
      Back to overview
    </a>
  </form>
</div>
